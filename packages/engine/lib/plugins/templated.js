// Generated by CoffeeScript 2.5.1
var templated;

templated = require('self-templated');

module.exports = {
  name: '@nikitajs/engine/lib/plugins/templated',
  hooks: {
    'nikita:session:normalize': function(action) {
      var base;
      return (base = action.metadata).templated != null ? base.templated : base.templated = true;
    },
    'nikita:session:action': function(action) {
      if (!action.metadata.templated) {
        return;
      }
      return templated(action, {
        array: true,
        compile: false,
        mutate: true,
        partial: {
          metadata: true,
          config: true
        }
      });
    }
  }
};
