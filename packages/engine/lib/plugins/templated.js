// Generated by CoffeeScript 2.5.1
var templated;

templated = require('self-templated');

module.exports = {
  module: '@nikitajs/engine/lib/plugins/templated',
  hooks: {
    'nikita:session:normalize': function(action) {
      var base;
      return (base = action.metadata).templated != null ? base.templated : base.templated = true;
    },
    'nikita:session:action': function(action) {
      var ref;
      if (action.metadata.templated !== false && ((ref = action.parent) != null ? ref.metadata.templated : void 0) !== false) {
        return templated(action, {
          array: true,
          compile: false,
          mutate: true,
          partial: {
            metadata: true,
            config: true
          }
        });
      }
    }
  }
};
